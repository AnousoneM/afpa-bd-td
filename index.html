<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>Les BD</title>
</head>

<body class="bg-secondary">

    <h1 class="text-center text-light">Liste des BD</h1>

    <div class="container">

        <div class="row justify-content-center text-center" id="allAlbums">

            <!-- Modele de div -->
            <!-- <div class="col-lg-2 mb-3">
                <img class="img-fluid border border-light shadow" src="assets/images/albumsMini/Arkezone-01-Le dôme.jpg"
                    alt="azeez">
            </div> -->

        </div>

    </div>

    <script src="data/albums.js"></script>
    <script src="data/series.js"></script>
    <script src="data/auteurs.js"></script>

    <script>

        const getAlbumImg = album => {
            // nous allons chercher le nom de la série via idSerie de l'album et nous supprimons les caractères spéciaux à l'aide du replace
            let serieName = series.get(album.idSerie).nom.replace(/'|!|\?|\.|"|:|\$/g, "");

            // Nous supprimons les caractères spéciaux à l'aide du replace
            let titre = album.titre.replace(/'|!|\?|\.|"|:|\$/g, "");

            // Nous définissons l'extension de l'image
            let extension = 'jpg';

            // il nous reste plus qu'à retourner le nom de l'image avec le format suivant : {nom-de-la-série}-{numéro-de-l'album}-{titre-de-l'album}.{extension}
            return `${serieName}-${album.numero}-${titre}.${extension}`;
        }

        let count = 0;
        albums.forEach(album => {
            // On stop l'affiche à 20 albums
            if (count == 18) {
                return;
            }
            // création d'une div
            let div = document.createElement('div');
            // Nous ajoutons les classes bootstrap à la div
            div.classList.add('col-lg-2', 'mb-3');

            // Nous ajoutons l'image dans div
            div.innerHTML = `<img class="img-fluid border border-light shadow" src="assets/images/albumsMini/${getAlbumImg(album)}" alt="${album.titre}">`;

            // Nous ajoutons la div dans le DOM
            document.querySelector('#allAlbums').appendChild(div);
            count++;
        });
    </script>

</body>

</html>